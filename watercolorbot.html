<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Painting Pictures and Making Games with a Watercoloring Robot &middot; jrheard's blog
    
  </title>

  <link type="text/css" rel="stylesheet" href="/assets/codemirror-d8d0e4f82d501ae76132942c181c87941858f8e1842e57cccffcbc40c4b69d44.css">
  <link type="text/css" rel="stylesheet" href="/assets/poole-d51676d786fd1108e51aacca94d7f2b94fa5be569be05bacf27312246fdd8d7a.css">
  <link type="text/css" rel="stylesheet" href="/assets/syntax-491475f8fdf68434f0c0085a0352afa7608a00596f3b2f52093067e8fac74fe0.css">
  <link type="text/css" rel="stylesheet" href="/assets/lanyon-e1ec4ff82f67d35979b06a5847932fa3e4ad62b09b2ffc439e5cdbec84f61ff3.css">
  <link type="text/css" rel="stylesheet" href="/assets/asciinema-player-5361e14a0d21a3d143479cc2f22fa61f93f6472823505642541f2103918b07fc.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

</head>


  <body class="theme-base-08">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>
	My name's JR Heard. I think pure functions are the greatest. I live in Portland with my cat <a href='/assets/frank-9709494b241673162ec8304c71ecaa808165611abed403aa04a82820f3e94a31.jpg'>Frank</a>.
	</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
		<a class="sidebar-nav-item" href="/about">About Me</a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
		<a class="sidebar-nav-item" href="/python/blackjack">Madison CS 3-4: Blackjack</a>
        
      
    
      
        
		<a class="sidebar-nav-item" href="/python/caesar">Madison CS 3-4: Caesar Cipher</a>
        
      
    
      
        
		<a class="sidebar-nav-item" href="/python/mad-libs">Madison CS 3-4: Mad Libs</a>
        
      
    
      
        
		<a class="sidebar-nav-item" href="/python/passwords">Madison CS 3-4: Password generator and checker</a>
        
      
    
      
        
		<a class="sidebar-nav-item" href="/python/tic-tac-toe">Madison CS 3-4: Tic-Tac-Toe</a>
        
      
    

    <a class="sidebar-nav-item" href="http://github.com/jrheard">GitHub</a>
    <a class="sidebar-nav-item" href="http://twitter.com/jrheard">Twitter</a>
	<a class="sidebar-nav-item" href="/quinto">Quinto</a>
	<a class="sidebar-nav-item" href="/duelyst.html">Duelyst Tool</a>
	<a class="sidebar-nav-item" href="http://himom.jrheard.com">himom</a>
  </nav>

  
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">jrheard's blog</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
	
        <div class="post">
	<h1 class="post-title">Painting Pictures and Making Games with a Watercoloring Robot</h1>
	<span class="post-date">30 Nov 2017</span>
	<p>I‚Äôm spending the 2017-18 school year volunteering in a few tech classes in a local high school, including a beginner/intermediate Python course led by a teacher named Tamara O‚ÄôMalley. She‚Äôs new to Python, and I have a lot of experience with the language, so I‚Äôve been helping her come up with <a href="http://blog.jrheard.com/python/passwords">fun projects</a> for the students to work on.</p>

<p>When we started talking about potential projects, Tamara mentioned that she had a <a href="http://watercolorbot.com/">WaterColorBot</a> that she‚Äôd like to have the students use in some way. Here‚Äôs a picture from its official website:</p>

<p><img src="/assets/wcb_pristine-4b8cf98fd4af70a5487730f6c71aa5910b6f7bb50c32178731e4b11fbca41eb4.jpg" width="720" height="540" alt="wcb_pristine.jpg" /></p>

<p>She‚Äôd already had a lot of success using the bot in another intro-to-programming course via a block-based language called <a href="https://github.com/evil-mad/WaterColorBlocks">Snap</a>, but she wasn‚Äôt sure how to talk to the bot via Python.</p>

<p>This sounded like a fun project, so I looked into it. It turns out that there are <a href="http://wiki.evilmadscientist.com/WaterColorBot#Part_II:_Software_for_WaterColorBot">lot of great ways</a> to drive the bot via software, but I couldn‚Äôt find anything Python-based that did what we wanted. I came up with a few possible approaches and asked <a href="https://www.evilmadscientist.com/about/">Windell Oskay</a> for advice, and he kindly set us on the right track ‚Äî thanks, Windell!</p>

<h2 id="madisonwcb">madison_wcb</h2>

<p>I ended up writing a library called <a href="http://madison-wcb.readthedocs.io/en/latest/"><code class="highlighter-rouge">madison_wcb</code></a> to solve our problem. (This library was easy to write, thanks to the excellent and well-documented <a href="https://github.com/techninja/cncserver/blob/master/scratch/SCRATCH.API.md">‚ÄúScratch API‚Äù</a> that the bot supports.)</p>

<p>The library lets students write code like this:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># Dip the brush in the palette's top-most color.</span>
<span class="n">get_color</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Move the brush to the mid-right side of the page, "face" directly</span>
<span class="c"># "south", and lower the brush so that it touches the paper.</span>
<span class="n">move_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">point_in_direction</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">)</span>
<span class="n">brush_down</span><span class="p">()</span>

<span class="c"># Paint a circle!</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">360</span><span class="p">):</span>
	<span class="n">move_forward</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
	<span class="n">turn_right</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre>
</div>

<p>If you‚Äôve got a WaterColorBot lying around, you can use this library too! Just check out the <a href="http://madison-wcb.readthedocs.io/en/latest/">documentation</a> or <a href="https://github.com/jrheard/madison_wcb">source code</a> and go nuts.</p>

<p>Here‚Äôs one student‚Äôs program in action:</p>

<div style="position:relative;padding-bottom:54%;margin-bottom:15px;"><iframe src="https://gfycat.com/ifr/ColdBigAzurevase" frameborder="0" scrolling="no" width="100%" height="100%" style="position:absolute;top:0;left:0" allowfullscreen=""></iframe></div>

<p>The library also uses Python‚Äôs built-in <a href="https://docs.python.org/3.3/library/turtle.html?highlight=turtle"><code class="highlighter-rouge">turtle</code></a> module to show you what your program will do.</p>

<p><img src="/assets/wcb_turtle-7f8e540080f670b0770849d45426cb0030e9c01b7f0abf8aeb14fe85acc94942.gif" width="500" height="380" alt="wcb_turtle.gif" /></p>

<p>This saves users a lot of potential frustration, and also a bunch of paint.</p>

<h2 id="perhaps-somewhat-impractical">Perhaps Somewhat Impractical</h2>

<p>To be honest, this library is a pretty insane way to control the bot. It‚Äôs needlessly low-level: you‚Äôre manually controlling the brush‚Äôs position, you‚Äôve got to remember to wash and re-ink the brush every so often, etc. If your main goal is to just get the bot to paint a pretty picture, there are lots of <a href="http://wiki.evilmadscientist.com/WaterColorBot#Part_II:_Software_for_WaterColorBot">better ways</a> to go about it.</p>

<p>As a teaching aid, though, it‚Äôs been a total success, because it lets students flex their burgeoning Python skills and actually make a real thing in the process! We‚Äôve been blown away by the stuff our students have created. Here‚Äôs an N64 logo in seven hundred and fifty hand-crafted lines of Python:</p>

<p><img src="/assets/wcb_1-34f85e2018f3f117ee9f5d636266d304b06ac2fb0344e72c26e506986db4d816.JPG" width="720" height="540" alt="wcb_1.JPG" /></p>

<p>This clock depicts the time at which the program was run:</p>

<p><img src="/assets/wcb_2-c504a3cbf9f8c5384b24d525c414088daad5b4e3ecb75cc61e5e02a3e46940c6.JPG" width="720" height="540" alt="wcb_2.JPG" /></p>

<p>This student drew her image from scratch in Paint or something, using only straight lines and simple curves so it would paint well on the bot, and then translated it into Python:</p>

<p><img src="/assets/wcb_3-b91dd01bdf48ec796521469226f25ce8aaeb42a48d6196ce8fac5719caab90c3.JPG" width="720" height="540" alt="wcb_3.JPG" /></p>

<p>And here‚Äôs a nice windowsill cat.</p>

<p><img src="/assets/wcb_4-c3f8cd61738fa4abd80d4d06424c8f7d854c04b6d715aa12bd6e62f7a7e94e5c.JPG" width="720" height="540" alt="wcb_4.JPG" /></p>

<p>These kids haven‚Äôt yet learned how to use lists/dicts or how to make their own functions, and they‚Äôre already making cool programs like these!</p>

<h2 id="interactivity">Interactivity</h2>

<p>Once I finished writing the library, I thought it might be fun to use the bot as a ‚Äúdisplay‚Äù for a video game. As a proof of concept, I wrote an embarrassingly basic <a href="https://github.com/jrheard/waterventure/blob/master/waterventure.py">text adventure</a> that uses the bot as a mini-map, painting in new rooms as you wander around the game world.</p>

<p><img src="/assets/waterventure-f43636d45847ddc8db3f3cca0ed68cf378eea3c37ad14e705583ee4ebb737329.gif" width="749" height="814" alt="waterventure.gif" /></p>

<p>My favorite part about it is that once you‚Äôve beaten the game, you end up with a completed map: a (slightly splotched) physical artifact that serves as proof of your victory.</p>

<p><img src="/assets/waterventure-13239953abefd3e785353d1fd15e7fb197fb8a934e325685f4a8b572b701b4d6.jpg" width="740" height="510" alt="waterventure.jpg" /></p>

<p>If you‚Äôre interested in making a game that runs on a watercoloring robot, here are some design constraints to keep in mind:</p>
<ul>
  <li>You‚Äôve got an <em>extremely</em> finite amount of screen real estate (one page of printer paper)</li>
  <li>If you want to e.g. start a new page every level (maybe you‚Äôre writing a dungeon-crawler?), the user has to fiddle with the machine for ten seconds to take off the old page and ensure there‚Äôs a fresh page ready to go, which could get irritating over time</li>
  <li>You probably don‚Äôt want to paint on the same ‚Äúpixel‚Äù twice (although I can imagine situations where an intentionally smudged page could make for a cool aesthetic)</li>
</ul>

<p>Anyway, I thought the idea of an interactive watercolor program was interesting, so I showed the text adventure to the students. A few of them liked the idea and made their projects interactive too. Here‚Äôs me losing at one student‚Äôs Minesweeper:</p>

<p><img src="/assets/minesweeper-5f66c7347602e15abe2c9405affecc82dbde92cd521183a805d7fd6b3f7387a2.gif" width="600" height="338" alt="minesweeper.gif" /></p>

<p>This student has never used a two-dimensional array before, and he wrote a fully-functioning version of Minesweeper that runs on a watercoloring robot.</p>

<p>For this program and a few others, we decided to swap out the paints and paintbrush in favor of a pen. This allows for a lot more precision when drawing a grid or text/numbers, because if you try to do small fiddly motions on the bot with a paintbrush equipped you tend to just get an aimless splotch of paint.</p>

<p>Drawing text/numbers on the bot is kind of a hassle in general and can make for a visual mess, so I thought it was really clever that this student used domino-style dots in order to indicate how many mines are adjacent to a particular square. A small X on an individual square means ‚Äúyou‚Äôve checked this square and there weren‚Äôt any mines nearby.‚Äù</p>

<p>Here‚Äôs another student‚Äôs implementation of Go:</p>

<p><img src="/assets/go-16780249dd6fe0ef7f958b110902a47937496fa16e6eb149e5a6dabb2be92978.gif" width="600" height="338" alt="go.gif" /></p>

<p>We didn‚Äôt want to stop the game after every move to swap out pens, so his program represents white pieces as squares and black pieces as triangles.</p>

<h2 id="lessons-learned">Lessons Learned</h2>

<p>I‚Äôve been programming for a long time, but this was my first time writing code that controls a physical object. At first I was worried that a bug in my library could e.g. cause the three-hundred-dollar bot to rip itself apart, but Windell assured me that the bot‚Äôs ‚ÄúScratch API‚Äù handles bounds checking automatically, and so that‚Äôs turned out not to be an issue.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></p>

<p>One thing we didn‚Äôt foresee was that our paints kept getting dirty, because students‚Äô rough-draft programs often didn‚Äôt wash the brush frequently enough ‚Äî for instance, you may have noticed that the solar system program from earlier in this article depicts an unusually brown sun. We went through a few palettes before solving this problem by setting aside a ‚Äúproduction‚Äù palette, which we only swap in when we‚Äôre painting a student‚Äôs known-good, final-draft program.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></p>

<p>We also learned the hard way that it‚Äôs important to remove the bot‚Äôs water trays and paints whenever you equip the robot with a pen. Whoops.</p>

<h2 id="thats-all-for-now">That‚Äôs All For Now</h2>
<p>We‚Äôve still got plenty of school year left, and I can‚Äôt wait to see what crazy antics these kids get up to in future projects!</p>

<p>BTW: If you‚Äôre a programmer interested in volunteering in a high school coding class, check out <a href="https://www.tealsk12.org/">TEALS</a>, it‚Äôs how I originally got involved with this school.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>If <code class="highlighter-rouge">madison_wcb</code> <em>does</em> kill your bot, I‚Äôm very sorry. Use at your own risk üòï <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>I can‚Äôt find the exact quote, but when I mentioned this in my friends‚Äô <a href="https://irc.darwin.network/">IRC channel</a>, one of them had a quip like ‚Äúgood programmers always separate stage and production‚Äù. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>


<div class="message">
	
	<p>If you've found an error or have a suggestion, please open an issue or pull request on <a href="https://github.com/jrheard/blog">GitHub</a>.</p>
</div>






      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>



	
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-7013093-3', 'auto');
	  ga('send', 'pageview');
	</script>
	

  </body>
</html>
